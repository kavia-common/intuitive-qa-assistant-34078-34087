{"is_source_file": true, "format": "Kotlin", "description": "This file contains unit tests for the ApiClient class in a Kotlin Android project. It tests JSON construction, answer extraction from JSON, and error handling during network calls, using mock objects and reflection to access internal methods.", "external_files": ["org/example/app/network/ApiClient.kt", "android.content.Context", "android.content.res.Resources", "org/example/app/ui/ConversationItem.kt", "org/example/app/ui/ConversationRole.kt", "org.junit.Assert", "org.junit.Test", "org.mockito.Mockito", "java.lang.reflect.Method"], "external_methods": ["Mockito.mock", "Mockito.`when`", "ApiClient#buildJson", "ApiClient#extractAnswer", "ApiClient#askQuestion", "assertEquals", "assertTrue"], "published": [], "classes": [{"name": "test_ApiClientTest", "description": "Unit test class for ApiClient, verifying JSON building, answer extraction, and exception handling."}], "methods": [{"name": "buildClientWithBaseUrl", "description": "Creates an ApiClient instance with mocked Resources and Context, configuring the base URL for testing."}, {"name": "buildJson_includesHistory_andEscapes", "description": "Tests the buildJson method to ensure it constructs JSON with history and escapes quotes properly."}, {"name": "extractAnswer_handlesSimpleJson_andFallback", "description": "Tests the extractAnswer method for correct parsing of simple JSON strings and fallback when keys are missing."}, {"name": "askQuestion_returnsErrorOnMalformedUrl_whenBaseConfigured", "description": "Verifies that askQuestion returns an error result when provided with a malformed URL."}], "calls": ["ApiClient#getDeclaredMethod", "Method#setAccessible", "Method#invoke", "Mockito.mock", "Mockito.`when`", "ApiClient#buildJson", "ApiClient#extractAnswer", "ApiClient#askQuestion"], "search-terms": ["ApiClientTest", "buildJson", "extractAnswer", "askQuestion", "Mockito", "Reflection", "JSON parsing", "Unit tests Android Kotlin"], "state": 2, "file_id": 27, "knowledge_revision": 66, "git_revision": "", "revision_history": [{"58": ""}, {"66": ""}], "hash": "b9a6af9f92d4a8e79ca0b14c9d91d32c", "format-version": 4, "code-base-name": "mobile_frontend", "filename": "mobile_frontend/app/src/test/kotlin/org/example/app/network/test_ApiClientTest.kt"}